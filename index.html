<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã€å•†å“åã€‘| ã‚ãªãŸã®ã‚·ãƒ§ãƒƒãƒ—å</title>
  <meta name="description" content="ã€å•†å“åã€‘ã®å…¬å¼å•†å“ãƒšãƒ¼ã‚¸ã€‚ç‰¹å¾´ãƒ»ä»•æ§˜ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»é…é€/è¿”å“ãƒãƒªã‚·ãƒ¼ãªã©ã€‚" />
  <meta name="robots" content="index,follow" />
  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="ã€å•†å“åã€‘| ã‚ãªãŸã®ã‚·ãƒ§ãƒƒãƒ—å" />
  <meta property="og:description" content="ã€å•†å“åã€‘ã®å…¬å¼å•†å“ãƒšãƒ¼ã‚¸ã€‚ç‰¹å¾´ãƒ»ä»•æ§˜ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»é…é€/è¿”å“ãƒãƒªã‚·ãƒ¼ãªã©ã€‚" />
  <meta property="og:type" content="product" />
  <meta property="og:url" content="https://example.com/products/slug" />
  <meta property="og:image" content="https://via.placeholder.com/1200x630.png?text=Product+OG" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0c10; --panel:#111218; --muted:#1a1b23; --line:#232432;
      --text:#e6e7ee; --sub:#a4a7b7; --brand:#7c5cff; --accent:#3ddc97; --warn:#ffb86b;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";}
    a{color:inherit}
    img{max-width:100%;display:block}
    .container{max-width:1200px;margin:auto;padding:24px}
    header{border-bottom:1px solid var(--line);background:rgba(255,255,255,0.02);backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:40}
    .topbar{display:flex;align-items:center;gap:16px;padding:12px 24px}
    .brand{font-weight:700;letter-spacing:.2px}
    .crumbs{font-size:12px;color:var(--sub)}
    .crumbs a{color:var(--sub);text-decoration:none}
    .grid{display:grid;gap:28px}
    @media(min-width:960px){.grid{grid-template-columns:1.1fr .9fr}}

    .card{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));border:1px solid var(--line);border-radius:16px;overflow:hidden}
    .panel{padding:20px 20px}

    /* Gallery */
    .gallery{display:grid;grid-template-columns:96px 1fr;gap:16px}
    .thumbs{display:flex;flex-direction:column;gap:10px;max-height:520px;overflow:auto}
    .thumb{border:1px solid var(--line);border-radius:10px;overflow:hidden;cursor:pointer;opacity:.8}
    .thumb.active,.thumb:hover{opacity:1;outline:2px solid var(--brand)}
    .stage{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0f1016;display:flex;align-items:center;justify-content:center;min-height:420px}

    /* Product info */
    .h1{font-size:28px;font-weight:700;margin:0 0 8px}
    .sub{color:var(--sub)}
    .price{display:flex;align-items:end;gap:10px;margin:10px 0 16px}
    .price-now{font-size:28px;font-weight:700;color:var(--accent)}
    .price-old{color:var(--sub);text-decoration:line-through}
    .badge{display:inline-flex;align-items:center;gap:6px;background:var(--muted);border:1px solid var(--line);padding:6px 10px;border-radius:999px;font-size:12px}
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}

    .options{display:grid;gap:14px}
    .field label{display:block;font-size:12px;color:var(--sub);margin-bottom:8px}
    .choices{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 12px;border:1px solid var(--line);border-radius:10px;cursor:pointer;background:var(--muted)}
    .chip[aria-checked="true"],.chip:hover{outline:2px solid var(--brand)}
    .qty{display:inline-flex;border:1px solid var(--line);border-radius:10px;overflow:hidden}
    .qty input{width:56px;text-align:center;background:transparent;color:var(--text);border:none}
    .qty button{width:36px;background:var(--muted);color:var(--text);border:none;cursor:pointer}

    .cta{display:flex;gap:12px;margin-top:14px}
    .btn{flex:1;display:inline-flex;justify-content:center;align-items:center;gap:8px;padding:14px 16px;border-radius:12px;border:1px solid var(--line);cursor:pointer;font-weight:600;}
    .btn.primary{background:linear-gradient(180deg,var(--brand),#5d3bff);color:#fff}
    .btn.secondary{background:var(--muted)}
    .notice{font-size:12px;color:var(--sub);margin-top:8px}

    /* Tabs */
    .tabs{margin-top:24px}
    .tab-list{display:flex;gap:8px;border-bottom:1px solid var(--line)}
    .tab-btn{padding:10px 14px;border:1px solid var(--line);border-bottom:none;border-top-left-radius:12px;border-top-right-radius:12px;background:var(--panel);cursor:pointer}
    .tab-btn[aria-selected="true"]{background:var(--muted);font-weight:600}
    .tab-panel{border:1px solid var(--line);border-top:none;border-bottom-left-radius:12px;border-bottom-right-radius:12px;padding:16px;background:var(--panel)}

    /* Accordions */
    details{border:1px solid var(--line);border-radius:12px;overflow:hidden}
    summary{padding:14px 16px;background:var(--muted);cursor:pointer}
    details>div{padding:14px 16px;background:var(--panel)}

    /* Related */
    .rel-grid{display:grid;gap:16px;grid-template-columns:repeat(2,1fr)}
    @media(min-width:720px){.rel-grid{grid-template-columns:repeat(4,1fr)}}
    .rel-card{border:1px solid var(--line);border-radius:14px;overflow:hidden;background:var(--panel)}
    .rel-card .meta{padding:10px 12px}
    .rating{display:flex;align-items:center;gap:6px;color:#ffd166}

    footer{border-top:1px solid var(--line);padding:24px;color:var(--sub);margin-top:40px}
  </style>

  <!-- Product structured data (Schema.org) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "ã€å•†å“åã€‘",
    "image": [
      "https://via.placeholder.com/1200x1200.png?text=Main+Image",
      "https://via.placeholder.com/600x600.png?text=Sub+1",
      "https://via.placeholder.com/600x600.png?text=Sub+2"
    ],
    "description": "ã€ã“ã“ã«å•†å“ã®æ¦‚è¦èª¬æ˜ã€‘",
    "sku": "SKU-12345",
    "brand": {
      "@type": "Brand",
      "name": "ã‚ãªãŸã®ãƒ–ãƒ©ãƒ³ãƒ‰"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.6",
      "reviewCount": "128"
    },
    "offers": {
      "@type": "Offer",
      "url": "https://example.com/products/slug",
      "priceCurrency": "JPY",
      "price": "7980",
      "priceValidUntil": "2026-12-31",
      "availability": "https://schema.org/InStock",
      "itemCondition": "https://schema.org/NewCondition",
      "sku": "SKU-12345",
      "seller": {"@type":"Organization","name":"ã‚ãªãŸã®ã‚·ãƒ§ãƒƒãƒ—å"}
    }
  }
  </script>
</head>
<body>
  <header>
    <div class="topbar">
      <div class="brand">ğŸ›ï¸ ã‚ãªãŸã®ã‚·ãƒ§ãƒƒãƒ—å</div>
    </div>
    <div class="container crumbs" aria-label="breadcrumb">
      <a href="/">ãƒ›ãƒ¼ãƒ </a> / <a href="/collections">ã‚«ãƒ†ã‚´ãƒªãƒ¼</a> / <span aria-current="page">ã€å•†å“åã€‘</span>
    </div>
  </header>

  <main class="container grid" id="product-root">
    <!-- Left: Gallery -->
    <section class="card panel" aria-label="å•†å“ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼">
      <div class="gallery">
        <div class="thumbs" id="thumbs" role="tablist" aria-label="ã‚µãƒ ãƒã‚¤ãƒ«">
          <button class="thumb active" role="tab" aria-selected="true" aria-controls="img-0" data-src="https://via.placeholder.com/1000x1000.png?text=Image+1">
            <img src="https://via.placeholder.com/180x180.png?text=1" alt="å•†å“ç”»åƒ1ã®ã‚µãƒ ãƒã‚¤ãƒ«">
          </button>
          <button class="thumb" role="tab" aria-selected="false" aria-controls="img-0" data-src="https://via.placeholder.com/1000x1000.png?text=Image+2">
            <img src="https://via.placeholder.com/180x180.png?text=2" alt="å•†å“ç”»åƒ2ã®ã‚µãƒ ãƒã‚¤ãƒ«">
          </button>
          <button class="thumb" role="tab" aria-selected="false" aria-controls="img-0" data-src="https://via.placeholder.com/1000x1000.png?text=Image+3">
            <img src="https://via.placeholder.com/180x180.png?text=3" alt="å•†å“ç”»åƒ3ã®ã‚µãƒ ãƒã‚¤ãƒ«">
          </button>
        </div>
        <div class="stage">
          <img id="hero" src="https://via.placeholder.com/1000x1000.png?text=Image+1" alt="ã€å•†å“åã€‘ã®ãƒ¡ã‚¤ãƒ³ç”»åƒ" loading="eager" width="1000" height="1000">
        </div>
      </div>
    </section>

    <!-- Right: Info -->
    <section class="card panel" aria-label="å•†å“æƒ…å ±">
      <h1 class="h1">ã€å•†å“åã€‘</h1>
      <div class="sub">å‹ç•ª: <span id="sku">SKU-12345</span> ãƒ» ãƒ–ãƒ©ãƒ³ãƒ‰: ã‚ãªãŸã®ãƒ–ãƒ©ãƒ³ãƒ‰</div>
      <div class="badges">
        <span class="badge" id="stock-badge">åœ¨åº«ã‚ã‚Š</span>
        <span class="badge">â­ 4.6 (128ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼)</span>
        <span class="badge">é€æ–™ç„¡æ–™</span>
        <span class="badge">30æ—¥è¿”å“å¯</span>
      </div>

      <div class="price" aria-live="polite">
        <div class="price-now"><span id="price">Â¥7,980</span><span style="font-size:14px;color:var(--sub)">ï¼ˆç¨è¾¼ï¼‰</span></div>
        <div class="price-old" id="price-old">Â¥9,800</div>
        <span class="badge" style="background:rgba(61,220,151,.1);color:var(--accent);border-color:rgba(61,220,151,.3)" id="discount-badge">18%OFF</span>
      </div>

      <p id="excerpt" class="sub" style="line-height:1.8">
        ã€å•†å“ã®çŸ­ã„èª¬æ˜ã€‘é«˜å“è³ªãªç´ æã¨æ´—ç·´ã•ã‚ŒãŸãƒ‡ã‚¶ã‚¤ãƒ³ã€‚æ—¥å¸¸ä½¿ã„ã‹ã‚‰ç‰¹åˆ¥ãªã‚·ãƒ¼ãƒ³ã¾ã§æ´»èºã—ã¾ã™ã€‚
      </p>

      <div class="options">
        <div class="field" id="opt-color">
          <label for="color">ã‚«ãƒ©ãƒ¼</label>
          <div class="choices" role="listbox" aria-label="ã‚«ãƒ©ãƒ¼ã‚’é¸æŠ">
            <button class="chip" role="option" aria-checked="true" data-color="ãƒ–ãƒ©ãƒƒã‚¯">ãƒ–ãƒ©ãƒƒã‚¯</button>
            <button class="chip" role="option" aria-checked="false" data-color="ã‚°ãƒ¬ãƒ¼">ã‚°ãƒ¬ãƒ¼</button>
            <button class="chip" role="option" aria-checked="false" data-color="ãƒ›ãƒ¯ã‚¤ãƒˆ">ãƒ›ãƒ¯ã‚¤ãƒˆ</button>
          </div>
        </div>
        <div class="field" id="opt-size">
          <label for="size">ã‚µã‚¤ã‚º</label>
          <div class="choices" role="listbox" aria-label="ã‚µã‚¤ã‚ºã‚’é¸æŠ">
            <button class="chip" role="option" aria-checked="true" data-size="S">S</button>
            <button class="chip" role="option" aria-checked="false" data-size="M">M</button>
            <button class="chip" role="option" aria-checked="false" data-size="L">L</button>
            <button class="chip" role="option" aria-checked="false" data-size="XL">XL</button>
          </div>
        </div>
        <div class="field">
          <label>æ•°é‡</label>
          <div class="qty" aria-label="æ•°é‡é¸æŠ">
            <button type="button" aria-label="æ¸›ã‚‰ã™" data-action="dec">âˆ’</button>
            <input type="number" id="qty" value="1" min="1" inputmode="numeric" aria-label="æ•°é‡">
            <button type="button" aria-label="å¢—ã‚„ã™" data-action="inc">ï¼‹</button>
          </div>
        </div>
      </div>

      <div class="cta">
        <button class="btn primary" id="add-to-cart" aria-label="ã‚«ãƒ¼ãƒˆã«å…¥ã‚Œã‚‹">ğŸ›’ ã‚«ãƒ¼ãƒˆã«å…¥ã‚Œã‚‹</button>
        <button class="btn secondary" id="buy-now" aria-label="ä»Šã™ãè³¼å…¥">âš¡ ä»Šã™ãè³¼å…¥</button>
      </div>
      <div class="notice" id="ship-note">ä»Šã”æ³¨æ–‡ã§ <strong>2ã€œ3å–¶æ¥­æ—¥ä»¥å†…</strong> ã«å‡ºè·äºˆå®š</div>

      <div class="tabs" id="tabs">
        <div role="tablist" aria-label="å•†å“ã‚¿ãƒ–" class="tab-list">
          <button class="tab-btn" role="tab" aria-controls="tab-desc" aria-selected="true">å•†å“èª¬æ˜</button>
          <button class="tab-btn" role="tab" aria-controls="tab-spec" aria-selected="false">ä»•æ§˜</button>
          <button class="tab-btn" role="tab" aria-controls="tab-review" aria-selected="false">ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
        </div>
        <section id="tab-desc" class="tab-panel" role="tabpanel">
          <p>ã€è©³ã—ã„å•†å“èª¬æ˜ã€‘ç´ æã€ä½¿ã„å¿ƒåœ°ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€ç‰¹å¾´ãªã©ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚</p>
          <ul>
            <li>ãƒã‚¤ãƒ³ãƒˆ1ï¼šè»½é‡ã§ä¸ˆå¤«</li>
            <li>ãƒã‚¤ãƒ³ãƒˆ2ï¼šé˜²æ°´åŠ å·¥</li>
            <li>ãƒã‚¤ãƒ³ãƒˆ3ï¼šä¸€å¹´é–“ã®è£½å“ä¿è¨¼</li>
          </ul>
        </section>
        <section id="tab-spec" class="tab-panel" role="tabpanel" hidden>
          <table style="width:100%;border-collapse:collapse">
            <tbody>
              <tr><td style="padding:8px;border-bottom:1px solid var(--line);color:var(--sub)">ç´ æ</td><td style="padding:8px;border-bottom:1px solid var(--line)">ãƒãƒªã‚¨ã‚¹ãƒ†ãƒ« 100%</td></tr>
              <tr><td style="padding:8px;border-bottom:1px solid var(--line);color:var(--sub)">é‡é‡</td><td style="padding:8px;border-bottom:1px solid var(--line)">ç´„ 450g</td></tr>
              <tr><td style="padding:8px;border-bottom:1px solid var(--line);color:var(--sub)">ç”Ÿç”£å›½</td><td style="padding:8px;border-bottom:1px solid var(--line)">æ—¥æœ¬</td></tr>
            </tbody>
          </table>
        </section>
        <section id="tab-review" class="tab-panel" role="tabpanel" hidden>
          <div>
            <p><strong>å¹³å‡è©•ä¾¡ 4.6/5</strong>ï¼ˆ128ä»¶ï¼‰</p>
            <article class="card panel" aria-label="ãƒ¬ãƒ“ãƒ¥ãƒ¼1">
              <header style="display:flex;justify-content:space-between;gap:8px;align-items:center">
                <div class="rating">â˜…â˜…â˜…â˜…â˜…</div>
                <div class="sub">2025-03-12 / åŒ¿å</div>
              </header>
              <p>æƒ³åƒä»¥ä¸Šã®å“è³ªã§ã—ãŸã€‚æ¯æ—¥ä½¿ã£ã¦ã„ã¾ã™ï¼</p>
            </article>
            <article class="card panel" aria-label="ãƒ¬ãƒ“ãƒ¥ãƒ¼2">
              <header style="display:flex;justify-content:space-between;gap:8px;align-items:center">
                <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
                <div class="sub">2025-02-02 / M.S.</div>
              </header>
              <p>ã‚µã‚¤ã‚ºã¯å°‘ã—å¤§ãã‚ã€‚æ¬¡ã¯ãƒ¯ãƒ³ã‚µã‚¤ã‚ºä¸‹ã‚’é¸ã³ã¾ã™ã€‚</p>
            </article>
          </div>
        </section>
      </div>

      <div style="display:grid;gap:12px;margin-top:20px">
        <details>
          <summary>é…é€ã«ã¤ã„ã¦</summary>
          <div>
            <p>ç¨è¾¼5,000å††ä»¥ä¸Šã®ã”æ³¨æ–‡ã§é€æ–™ç„¡æ–™ã€‚é€šå¸¸ã€2ã€œ3å–¶æ¥­æ—¥ã§å‡ºè·ã—ã¾ã™ã€‚</p>
          </div>
        </details>
        <details>
          <summary>è¿”å“ãƒ»äº¤æ›</summary>
          <div>
            <p>æœªä½¿ç”¨å“ã«é™ã‚Šã€å•†å“åˆ°ç€å¾Œ30æ—¥ä»¥å†…ã®è¿”å“ãƒ»äº¤æ›ã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚</p>
          </div>
        </details>
        <details>
          <summary>ã‚ˆãã‚ã‚‹è³ªå•</summary>
          <div>
            <p>Q. ã‚®ãƒ•ãƒˆãƒ©ãƒƒãƒ”ãƒ³ã‚°ã¯ã§ãã¾ã™ã‹ï¼Ÿ<br> A. ã¯ã„ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ‰¿ã‚Šã¾ã™ã€‚</p>
          </div>
        </details>
      </div>
    </section>
  </main>

  <section class="container" aria-label="é–¢é€£å•†å“">
    <h2 style="font-size:20px;margin:10px 0 14px">é–¢é€£å•†å“</h2>
    <div class="rel-grid">
      <article class="rel-card">
        <img src="https://via.placeholder.com/600x600.png?text=Rel+1" alt="é–¢é€£å•†å“1">
        <div class="meta"><div>é–¢é€£å•†å“1</div><div class="sub">Â¥4,980</div></div>
      </article>
      <article class="rel-card">
        <img src="https://via.placeholder.com/600x600.png?text=Rel+2" alt="é–¢é€£å•†å“2">
        <div class="meta"><div>é–¢é€£å•†å“2</div><div class="sub">Â¥6,480</div></div>
      </article>
      <article class="rel-card">
        <img src="https://via.placeholder.com/600x600.png?text=Rel+3" alt="é–¢é€£å•†å“3">
        <div class="meta"><div>é–¢é€£å•†å“3</div><div class="sub">Â¥3,280</div></div>
      </article>
      <article class="rel-card">
        <img src="https://via.placeholder.com/600x600.png?text=Rel+4" alt="é–¢é€£å•†å“4">
        <div class="meta"><div>é–¢é€£å•†å“4</div><div class="sub">Â¥8,800</div></div>
      </article>
    </div>
  </section>

  <footer class="container">
    <div>Â© <span id="year"></span> ã‚ãªãŸã®ã‚·ãƒ§ãƒƒãƒ—å</div>
  </footer>

  <script>
    // --- Gallery logic ---
    const hero = document.getElementById('hero');
    document.getElementById('thumbs').addEventListener('click', (e)=>{
      const btn = e.target.closest('.thumb');
      if(!btn) return;
      document.querySelectorAll('.thumb').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      hero.src = btn.dataset.src;
      document.querySelectorAll('.thumb').forEach(b=>b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true');
    });

    // --- Quantity stepper ---
    document.querySelectorAll('.qty button').forEach(btn=>btn.addEventListener('click',()=>{
      const input = document.getElementById('qty');
      const action = btn.dataset.action;
      const val = parseInt(input.value||'1',10);
      if(action==='inc') input.value = val+1; else input.value = Math.max(1,val-1);
    }));

    // --- Chips (options) ---
    document.querySelectorAll('.choices').forEach(group=>{
      group.addEventListener('click', (e)=>{
        const chip = e.target.closest('.chip');
        if(!chip) return;
        group.querySelectorAll('.chip').forEach(c=>c.setAttribute('aria-checked','false'));
        chip.setAttribute('aria-checked','true');
        updateVariant();
      });
    });

    // --- Variant/price demo logic ---
    const variants = {
      'ãƒ–ãƒ©ãƒƒã‚¯|M': { price: 7980, compareAt: 9800, stock: 12, sku: 'SKU-BK-M' },
      'ãƒ–ãƒ©ãƒƒã‚¯|L': { price: 7980, compareAt: 9800, stock: 0, sku: 'SKU-BK-L' },
      'ã‚°ãƒ¬ãƒ¼|M':   { price: 7480, compareAt: 0,    stock: 5,  sku: 'SKU-GY-M' },
      'ãƒ›ãƒ¯ã‚¤ãƒˆ|S': { price: 6980, compareAt: 0,    stock: 2,  sku: 'SKU-WH-S' }
    };

    function currentSelection(){
      const color = document.querySelector('#opt-color .chip[aria-checked="true"]').dataset.color;
      const size = document.querySelector('#opt-size .chip[aria-checked="true"]').dataset.size;
      return {color,size,key: `${color}|${size}`};
    }

    function formatJPY(n){
      return new Intl.NumberFormat('ja-JP',{style:'currency',currency:'JPY'}).format(n);
    }

    function updateVariant(){
      const sel = currentSelection();
      const v = variants[sel.key];
      const priceEl = document.getElementById('price');
      const priceOldEl = document.getElementById('price-old');
      const badge = document.getElementById('discount-badge');
      const stockBadge = document.getElementById('stock-badge');
      const skuEl = document.getElementById('sku');
      const addBtn = document.getElementById('add-to-cart');

      if(!v){
        priceEl.textContent = 'â€”';
        priceOldEl.style.display='none';
        badge.style.display='none';
        stockBadge.textContent='åœ¨åº«ãªã—ï¼ˆé¸æŠä¸å¯ï¼‰';
        addBtn.disabled = true; addBtn.style.opacity=.5;
        return;
      }

      priceEl.textContent = formatJPY(v.price);
      if(v.compareAt && v.compareAt>v.price){
        priceOldEl.textContent = formatJPY(v.compareAt);
        priceOldEl.style.display='inline-block';
        const off = Math.round((1 - v.price/v.compareAt)*100);
        badge.textContent = off + '%OFF';
        badge.style.display='inline-flex';
      } else {
        priceOldEl.style.display='none';
        badge.style.display='none';
      }

      skuEl.textContent = v.sku;

      if(v.stock>0){
        stockBadge.textContent='åœ¨åº«ã‚ã‚Šï¼ˆæ®‹ã‚Š' + v.stock + 'ï¼‰';
        addBtn.disabled = false; addBtn.style.opacity=1;
      } else {
        stockBadge.textContent='åœ¨åº«åˆ‡ã‚Œ';
        addBtn.disabled = true; addBtn.style.opacity=.5;
      }
    }

    updateVariant();

    // --- Tabs ---
    const tabBtns = document.querySelectorAll('.tab-btn');
    tabBtns.forEach(btn=>btn.addEventListener('click',()=>{
      tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true');
      document.querySelectorAll('.tab-panel').forEach(p=>p.hidden=true);
      document.getElementById(btn.getAttribute('aria-controls')).hidden=false;
    }));

    // --- Buy actions (demo) ---
    document.getElementById('add-to-cart').addEventListener('click',()=>{
      const {color,size} = currentSelection();
      alert(`ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ\nå•†å“: ã€å•†å“åã€‘\nã‚«ãƒ©ãƒ¼: ${color} / ã‚µã‚¤ã‚º: ${size}\næ•°é‡: ${document.getElementById('qty').value}`);
    });
    document.getElementById('buy-now').addEventListener('click',()=>{
      alert('ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã¸é€²ã¿ã¾ã™ï¼ˆãƒ‡ãƒ¢ï¼‰');
    });

    // --- Footer year ---
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
